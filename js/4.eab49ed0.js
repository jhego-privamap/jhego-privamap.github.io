(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"07a4":function(e,t,a){"use strict";var o=a("2b0e"),n=a("2f62");o["default"].use(n["a"]),t["a"]=new n["a"].Store({state:{selectedTreeElement:null,isRetryLocate:!1,geolocDisabled:!1,isDirectionMode:!1,itineraryStartTreeElt:"1-112",isNavigationMode:!1},mutations:{setSelectedTreeElement:function(e,t){console.log("setSelectedTreeElement triggered with"),console.log(t),e.selectedTreeElement=t},setRetryLocate:function(e,t){console.log("setRetryLocate triggered with"),console.log(t),e.isRetryLocate=t},setGeolocDisabled:function(e,t){console.log("setGeolocDisabled triggered with"),console.log(t),e.geolocDisabled=t},setDirectionMode:function(e,t){console.log("setDirectionMode triggered with"),console.log(t),e.isDirectionMode=t},setItineraryStartTreeElt:function(e,t){console.log("setItineraryStartTreeElt triggered with"),console.log(t),e.itineraryStartTreeElt=t},setNavigationMode:function(e,t){console.log("setNavigationMode triggered with"),console.log(t),e.isNavigationMode=t}}})},"713b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{staticClass:"noDoubleTap",attrs:{view:"lHr Lpr lFr",onClick:"{e => e.preventDefault()}"}},[a("meta",{attrs:{name:"viewport",content:"width=device-width, user-scalable=no"}}),a("q-header",{staticClass:"noDoubleTap",attrs:{elevated:"",id:"Qheader"}},[a("q-toolbar",{staticClass:"q-pa-xs",attrs:{id:"upperToolbar"}},[e.isDirections||e.isNavigation?a("q-btn",{staticClass:"backBtn",attrs:{padding:"5px",flat:"",color:"white",size:"lg",icon:"fas fa-arrow-left"},on:{click:e.cancelDir}}):e._e(),e.isNavigation?a("div",{staticClass:"q-ml-sm"},[e._v("\n        Vers :\n        "),a("div",{staticClass:"navArrivalNameDiv"},[e._v("\n           "+e._s(e.navArrivalName)+"\n        ")])]):e._e(),a("div",{staticClass:"researchTree"},[e.isDirections?a("treeselect",{staticClass:"treeSelectElement q-pb-xs",attrs:{multiple:!1,clearable:!0,searchable:!0,disabled:!1,"open-on-click":!0,"open-on-focus":!0,"clear-on-select":!0,"close-on-select":!0,"always-open":!1,"append-to-body":!1,options:e.types,limit:3,"max-height":200,"flatten-search-results":!0,placeholder:"Place"},model:{value:e.startElement,callback:function(t){e.startElement=t},expression:"startElement"}}):e._e(),e.isNavigation?e._e():a("treeselect",{staticClass:"treeSelectElement",attrs:{multiple:!1,clearable:!0,searchable:!0,disabled:!1,"open-on-click":!0,"open-on-focus":!0,"clear-on-select":!0,"close-on-select":!0,"always-open":!1,"append-to-body":!1,options:e.types,limit:3,"max-height":200,"flatten-search-results":!0,placeholder:"Place"},model:{value:e.selectedElement,callback:function(t){e.selectedElement=t},expression:"selectedElement"}})],1),e.isDirections?a("q-btn",{staticClass:"exchangeBtn",attrs:{padding:"5px",flat:"",color:"white",size:"lg",icon:"fas fa-exchange-alt"}}):e._e(),e.isDirections||e.isNavigation?e._e():a("q-btn",{attrs:{padding:"1px",flat:"",color:"white",size:"28px",icon:"img:statics\\QrCode.png"},on:{click:function(t){e.showQrCode=!e.showQrCode}}}),a("QrCodeGenerator",{attrs:{showDialog:e.showQrCode}})],1)],1),a("q-page-container",[a("router-view")],1)],1)},n=[],i=(a("28a5"),a("6b54"),a("6762"),a("2fdb"),a("7f7f"),a("ac6a"),a("cadf"),a("06db"),a("5df3"),a("f400"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{persistent:""},model:{value:e.isDialog,callback:function(t){e.isDialog=t},expression:"isDialog"}},[a("q-card",[a("q-toolbar",[a("q-avatar",[a("q-icon",{attrs:{name:"fas fa-qrcode"}})],1),a("q-toolbar-title",[e._v("QrCode")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("q-card-section",{attrs:{id:"qrCodeContainer"}},[a("canvas",{attrs:{id:"qrCodeCanvas"}})]),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{attrs:{icon:"fas fa-copy",label:"Copier dans le presse-papier",color:"primary","no-caps":""},on:{click:e.copyToClipboardClick}})],1)],1)],1)}),s=[],l=a("c4a7"),r=a.n(l),c=a("cdde"),d={name:"QrCodeDialog",props:{showDialog:null},data:function(){return{isDialog:!1,qrCode:null}},created:function(){},watch:{showDialog:function(){this.isDialog=!0,setTimeout((function(){var e=document.getElementById("qrCodeCanvas");this.qrCode=new r.a({element:e,background:"white",backgroundAlpha:.8,foreground:"black",foregroundAlpha:.8,level:"H",size:Math.min(e.offsetWidth,560),value:document.location.origin})}),0)}},methods:{copyToClipboardClick:function(){var e=this;Object(c["a"])(document.location.origin).then((function(){e.$q.notify({message:"Lien copi√© dans le presse-papier."})})).catch((function(){}))}}},u=d,p=a("2877"),g=a("eebe"),m=a.n(g),f=a("24e8"),h=a("f09f"),v=a("65c6"),b=a("cb32"),w=a("0016"),C=a("6ac5"),E=a("9c40"),y=a("a370"),D=a("4b7e"),q=a("7f67"),T=Object(p["a"])(u,i,s,!1,null,null,null),Q=T.exports;m()(T,"components",{QDialog:f["a"],QCard:h["a"],QToolbar:v["a"],QAvatar:b["a"],QIcon:w["a"],QToolbarTitle:C["a"],QBtn:E["a"],QCardSection:y["a"],QCardActions:D["a"]}),m()(T,"directives",{ClosePopup:q["a"]});var k=a("ca17"),N=a.n(k),x=(a("542c"),a("07a4")),M={name:"MainLayout",components:{QrCodeGenerator:Q,Treeselect:N.a},data:function(){return{types:[],store:x["a"],showQrCode:!1,eltLabelsById:new Map,navArrivalName:"not found"}},created:function(){var e=this,t=[],a="https://privamap-dev.azurewebsites.net/api/elementType/all",o={method:"GET",redirect:"follow"};fetch(a,o).then((function(e){return e.text()})).then((function(a){t=JSON.parse(a).ElementTypes;for(var o=0;o<t.length;o++){for(var n=[],i=0;i<t[o].Elements.length;i++){var s={id:t[o].id+"-"+t[o].Elements[i].id,label:t[o].Elements[i].name};e.eltLabelsById.set(t[o].Elements[i].id,t[o].Elements[i].name),n.push(s)}var l={id:t[o].id,label:t[o].name,children:n};e.types.push(l)}t.length>0&&(e.selectedElement=t[0].id)})).catch((function(e){return console.log("error",e)}))},computed:{isDirections:function(){return this.store.state.isDirectionMode},isNavigation:function(){return this.store.state.isNavigationMode},selectedElement:{get:function(){return this.store.state.selectedTreeElement},set:function(e){this.store.commit("setSelectedTreeElement",e),e.toString().includes("-")&&(this.navArrivalName=this.eltLabelsById.get(parseInt(e.split("-")[1])))}},startElement:{get:function(){return this.store.state.itineraryStartTreeElt},set:function(e){this.store.commit("setItineraryStartTreeElt",e)}}},watch:{},methods:{cancelDir:function(){this.store.commit("setDirectionMode",!1),this.store.commit("setNavigationMode",!1)}}},S=M,_=a("4d5a"),L=a("e359"),I=a("09e3"),A=Object(p["a"])(S,o,n,!1,null,null,null);t["default"]=A.exports;m()(A,"components",{QLayout:_["a"],QHeader:L["a"],QToolbar:v["a"],QBtn:E["a"],QPageContainer:I["a"]})}}]);